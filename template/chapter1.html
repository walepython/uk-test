{% extends 'base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'chapter1.css' %}">

<div class="chapter-container">
    <!-- Chapter Header -->
    <div class="chapter-header">
        <div class="breadcrumb">
            <a href="{% url 'study_materials' %}">Study Materials</a> &gt; 
            <span>Chapter 1</span>
        </div>
        <h1>Chapter 1: The Values and Principles of the UK</h1>
        <div class="chapter-meta">
            <span class="badge">Essential Reading</span>
            <span class="progress">Progress: <strong>0%</strong></span>
        </div>
    </div>

    <div class="row">
        <!-- Main Content Column -->
        <div class="col-lg-8">
            <!-- Introduction Card -->
            <div class="content-card">
                <div class="card-header">
                    <h2>Introduction</h2>
                </div>
                <div class="card-body">
                    <p class="lead">
                        Britain is a fantastic place to live: a modern, thriving society with a long and illustrious history. 
                        Our people have been at the heart of the world's political, scientific, industrial and cultural development. 
                        We are proud of our record of welcoming new migrants who will add to the diversity and dynamism of our national life.
                    </p>
                    
                    <p>
                        The first section of this Chapter focuses on the fundamental values and principles of being a UK citizen, 
                        providing an overview of the responsibilities and freedoms that apply to anyone living in this country.
                    </p>
                    
                    <p>
                        The second section of Chapter 1 examines the requirements that you must fulfil if you want to become 
                        a permanent resident or citizen of the UK. Finally, the last section of this Chapter serves as a guidance 
                        on what test involves, how you can book your Life in the UK Test, how to use the 'Life in the UK Handbook 
                        3rd Edition: A Guide for New Residents' as well as a section of useful contacts where you can find information 
                        on any other questions that you may have about your application to become a permanent resident or British 
                        citizen or about your Life in the UK Citizenship Test.
                    </p>
                    
                    <div class="important-note">
                        <h4>Important Note:</h4>
                        <p>
                            Applying to become a permanent resident or citizen of the UK is an important decision and commitment. 
                            You will be agreeing to accept the responsibilities which go with permanent residence and to respect 
                            the laws, values and traditions of the UK. Good citizens are an asset to the UK. We welcome those 
                            seeking to make a positive contribution to our society.
                        </p>
                        <p>
                            Passing the Life in the UK test is part of demonstrating that you are ready to become a permanent 
                            migrant to the UK. This handbook is designed to support you in your preparation. It will help you 
                            to integrate into society and play a full role in your local community. It will also help ensure that 
                            you have a broad general knowledge of the culture, laws and history of the UK.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Section 1: Values and Principles -->
            <div class="content-card">
                <div class="card-header">
                    <h2>The Values and Principles of the UK</h2>
                </div>
                <div class="card-body">
                    <p>
                        British society is founded on fundamental values and principles which all those living in the UK 
                        should respect and support. These values are reflected in the responsibilities, rights and 
                        privileges of being a British citizen or permanent resident of the UK. They are based on history 
                        and traditions and are protected by law, customs and expectations. There is no place in British 
                        society for extremism or intolerance.
                    </p>
                    
                    <div class="principles-section">
                        <h3>The fundamental principles of British life include:</h3>
                        <ul class="principles-list">
                            <li>
                                <strong>Democracy</strong>
                                <p>The right of people to elect their government through free and fair elections.</p>
                            </li>
                            <li>
                                <strong>The Rule of Law</strong>
                                <p>No one is above the law, and all are equal before the law.</p>
                            </li>
                            <li>
                                <strong>Individual Liberty</strong>
                                <p>Freedom of thought, expression, and action within the bounds of the law.</p>
                            </li>
                            <li>
                                <strong>Tolerance of those with different faiths and beliefs</strong>
                                <p>Respect for diverse religious and cultural backgrounds.</p>
                            </li>
                            <li>
                                <strong>Participation in community life</strong>
                                <p>Active involvement in local and national community activities.</p>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="citizenship-pledge">
                        <h4>The Citizenship Pledge</h4>
                        <p>
                            As part of the citizenship ceremony, new citizens pledge to uphold these values. The pledge is:
                        </p>
                        <div class="pledge-box">
                            <blockquote>
                                "I will give my loyalty to the United Kingdom and respect its rights and freedoms. 
                                I will uphold its democratic values. I will observe its laws faithfully and fulfil 
                                my duties and obligations as a British citizen."
                            </blockquote>
                        </div>
                    </div>
                    
                    <div class="responsibilities-section">
                        <h3>Responsibilities and Freedoms</h3>
                        <p>
                            Flowing from the fundamental principles are responsibilities and freedoms which are shared 
                            by all those living in the UK and which we expect all residents to respect.
                        </p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="responsibility-card">
                                    <h4>If you wish to be a permanent resident or citizen of the UK, you should:</h4>
                                    <ul>
                                        <li>Respect and obey the law</li>
                                        <li>Respect the rights of others, including their right to their own opinions</li>
                                        <li>Treat others with fairness</li>
                                        <li>Look after yourself and your family</li>
                                        <li>Look after the area in which you live and the environment</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="freedom-card">
                                    <h4>Your Freedoms:</h4>
                                    <ul>
                                        <li>Freedom of belief and religion</li>
                                        <li>Freedom of speech</li>
                                        <li>Freedom from unfair discrimination</li>
                                        <li>A right to a fair trial</li>
                                        <li>A right to join in the election of a government</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 2: Becoming a Permanent Resident -->
            <div class="content-card">
                <div class="card-header">
                    <h2>Becoming a Permanent Resident</h2>
                </div>
                <div class="card-body">
                    <p>
                        To apply to become a permanent resident or citizen of the UK, you will need to:
                    </p>
                    
                    <div class="requirements-box">
                        <h4>Requirements for Permanent Residence/Citizenship:</h4>
                        <div class="requirements-grid">
                            <div class="requirement-item">
                                <div class="requirement-icon">üá¨üáß</div>
                                <h5>Speak and Read English</h5>
                                <p>Have proficiency in English language</p>
                            </div>
                            <div class="requirement-item">
                                <div class="requirement-icon">üìö</div>
                                <h5>Understand Life in the UK</h5>
                                <p>Knowledge of British society and culture</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="test-requirements">
                        <h4>This means you will need to:</h4>
                        <div class="and-connector">
                            <div class="requirement-card">
                                <div class="requirement-number">1</div>
                                <div class="requirement-content">
                                    <h5>Pass the Life in the UK Test</h5>
                                    <p>Successfully complete the official citizenship test</p>
                                </div>
                            </div>
                            <div class="connector">AND</div>
                            <div class="requirement-card">
                                <div class="requirement-number">2</div>
                                <div class="requirement-content">
                                    <h5>English Language Proficiency</h5>
                                    <p>Produce acceptable evidence of speaking and listening skills in English at B1 of the Common European Framework of Reference (equivalent to ESOL Entry Level 3)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="important-notice">
                        <div class="notice-icon">‚ö†Ô∏è</div>
                        <div class="notice-content">
                            <h5>Important Notice:</h5>
                            <p>
                                The requirements for citizenship applications may also change in the future. Further details 
                                will be published on the UK Border Agency website. You should check the information on that 
                                website for current requirements before applying for settlement or citizenship.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Taking the Life in the UK Test -->
            <div class="content-card">
                <div class="card-header">
                    <h2>Taking the Life in the UK Test</h2>
                </div>
                <div class="card-body">
                    <p>
                        The Life in the UK test handbook will help prepare you for taking the Life in the UK test. 
                        The test consists of 24 questions about important aspects of life in the UK.Questions are based on ALL parts of the handbook. The 24 questions will be different for each person taking the test at that test session.
                    </p>
                    
                    <div class="test-details">
                        <h4>Test Details:</h4>
                        <ul>
                            <li><strong>Questions:</strong> 24 questions per test</li>
                            <li><strong>Content:</strong> Questions based on ALL parts of the handbook</li>
                            <li><strong>Variation:</strong> Questions are different for each person taking the test</li>
                            <li><strong>Language:</strong> Usually taken in English (special arrangements for Welsh or Scottish Gaelic)</li>
                        </ul>
                    </div>
                    
                    <div class="test-centers">
                        <h4>Test Centers and Booking:</h4>
                        <ul>
                            <li>You can only take the test at registered and approved Life in the UK test centres</li>
                            <li>There are about 30 test centres around the UK</li>
                            <li>Booking is online only at <a href="https://www.gov.uk/life-in-the-uk-test" target="_blank">www.gov.uk/life-in-the-uk-test</a></li>
                            <li>Different arrangements if you live on the Isle of Man or in the Channel Islands</li>
                        </ul>
                        
                        <div class="warning-box">
                            <h5>‚ö†Ô∏è Important Warning:</h5>
                            <p>
                                You should not take your test at any other establishment as the UK Border Agency will only 
                                accept certificates from registered test centres.
                            </p>
                        </div>
                        
                        <div class="booking-instructions">
                            <h5>When booking your test:</h5>
                            <ul>
                                <li>Read the instructions carefully</li>
                                <li>Make sure you enter your details correctly</li>
                                <li>You will need to take identification and proof of address</li>
                                <li>Without proper documents, you will not be able to take the test</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Test Handbook -->
            <div class="content-card">
                <div class="card-header">
                    <h2>Life in the UK Test Handbook</h2>
                </div>
                <div class="card-body">
                    <p>
                        Everything that you will need to know to pass the Life in the UK test is included in the 
                        <strong>'Life in the United Kingdom: A Guide for New Residents'</strong> handbook.
                    </p>
                    
                    <div class="handbook-info">
                        <h4>Key Points:</h4>
                        <ul>
                            <li>Questions will be based on the <strong>whole book</strong>, including the introduction</li>
                            <li>Make sure you study the entire book thoroughly</li>
                            <li>The handbook is written for ESOL Entry Level 3 or above English proficiency</li>
                            <li>Language should not be a difficulty for readers at this level</li>
                        </ul>
                    </div>
                    
                    <div class="study-guidance">
                        <h4>Study Guidance:</h4>
                        <p>
                            The 'Check that you understand' sections are for guidance. They will help you to identify 
                            particular things that you should understand.
                        </p>
                        
                        <div class="important-warning">
                            <div class="warning-icon">‚ùó</div>
                            <div class="warning-content">
                                <h5>Important:</h5>
                                <p>
                                    Just knowing the things highlighted in these sections will <strong>not</strong> be enough to pass the test. 
                                    You need to make sure that you understand everything in the book, so please read the information carefully.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 5: Where to Find More Information -->
            <div class="content-card">
                <div class="card-header">
                    <h2>Where to Find More Information</h2>
                </div>
                <div class="card-body">
                    <p>You can find out more information from the following places:</p>
                    
                    <div class="info-sources">
                        <div class="info-source">
                            <h4>üìã The Home Office website</h4>
                            <p>For information about the application process and the forms you will need to complete.</p>
                        </div>
                        
                        <div class="info-source">
                            <h4>üåê The Life in the UK test website</h4>
                            <p>For information about the test and how to book a place to take one.</p>
                        </div>
                        
                        <div class="info-source">
                            <h4>üèõÔ∏è Gov.uk (www.gov.uk)</h4>
                            <p>For information about ESOL courses on how to find one in your area.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Check Your Understanding Section -->
            <div class="content-card check-section">
                <div class="card-header">
                    <h2>Check That You Understand</h2>
                </div>
                <div class="card-body">
                    <div class="checkpoints">
                        <div class="checkpoint">
                            <input type="checkbox" id="check1">
                            <label for="check1">
                                The origin of the values underlying British society
                            </label>
                        </div>
                        <div class="checkpoint">
                            <input type="checkbox" id="check2">
                            <label for="check2">
                                The fundamental principles of British life
                            </label>
                        </div>
                        <div class="checkpoint">
                            <input type="checkbox" id="check3">
                            <label for="check3">
                                The responsibilities and freedoms which come with permanent residence
                            </label>
                        </div>
                        <div class="checkpoint">
                            <input type="checkbox" id="check4">
                            <label for="check4">
                                The process of becoming a permanent resident or citizen
                            </label>
                        </div>
                    </div>
                    
                    <div class="mark-complete">
                        <button class="btn btn-primary" id="markCompleteBtn">
                            Mark Chapter as Complete
                        </button>
                        <span class="completion-status" id="completionStatus">Not completed</span>
                    </div>

                    <!-- Action Buttons Section -->
                <div class="action-buttons" style="display: flex; gap:  30px; margin-top: 40px; justify-content: center;">

                    {% if test_id %}
            <a href="{% url 'take_test' test_id %}" 
            class="btn"
            style="background:#1e73ff;color:white;padding:15px 35px;border-radius:30px;">
                ‚ûú TEST YOUR KNOWLEDGE
            </a>
        {% else %}
            <a href="#" 
            onclick="alert('No test available for this chapter yet.')"
            class="btn"
            style="background:#777;color:white;padding:15px 35px;border-radius:30px;">
                ‚ûú TEST YOUR KNOWLEDGE
            </a>
        {% endif %}

                    <a href="{% url 'chapter2' %}" 
                    class="btn"
                    style="
                            background: #1e73ff;
                            color: white;
                            padding: 15px 35px;
                            border-radius: 30px;
                            text-decoration: none;
                            font-size: 18px;
                            font-weight: 700;
                            box-shadow: 0 6px 0 #155bcc;
                            transition: 0.2s;
                    ">
                        ‚ûú GO TO CHAPTER 2
                    </a>

                </div>

                </div>
            </div>
        </div>

        <!-- Sidebar Column -->
        <div class="col-lg-4">
            <!-- Support Card -->
            <div class="support-card">
                <div class="support-header">
                    <h3>Support this project</h3>
                    <div class="heart-icon">‚ô•</div>
                </div>
                <div class="support-body">
                    <p>
                        Lifeintheuktestweb has been created as a free source to help migrants 
                        prepare for the British Citizenship test. If you like this project 
                        and would like to help us maintain it please donate.
                    </p>
                    
                    <div class="thank-you">
                        <strong>Thanks and good luck!</strong>
                    </div>
                    
                    <!-- Donate Section -->
                    <div class="donate-section">
                        <h4>Donate</h4>
                        <div class="donate-options">
                            <button class="donate-option">¬£5</button>
                            <button class="donate-option">¬£10</button>
                            <button class="donate-option">¬£20</button>
                            <button class="donate-option">¬£50</button>
                            <button class="donate-option custom-amount">Custom</button>
                        </div>
                        
                        <button class="donate-button">Donate Now</button>
                    </div>
                </div>
            </div>
            
            <!-- Test Your Knowledge Card -->
            <div class="test-card">
                <h3>TEST YOUR KNOWLEDGE</h3>
                <p>Take a quiz based on Chapter 1 content</p>
                <div class="quiz-stats">
                    <div class="stat">
                        <span class="stat-number">10</span>
                        <span class="stat-label">Questions</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">75%</span>
                        <span class="stat-label">Pass Mark</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">15</span>
                        <span class="stat-label">Minutes</span>
                    </div>
                </div>
                <a href="#" class="start-quiz-btn">Start Chapter 1 Quiz</a>
            </div>
            
            <!-- Navigation Card -->
            <div class="navigation-card">
                <h4>Chapter Navigation</h4>
                <div class="chapter-list">
                    <a href="#" class="chapter-link active">
                        <span class="chapter-number">1</span>
                        <span class="chapter-title">Values and Principles</span>
                    </a>
                    <a href="#" class="chapter-link">
                        <span class="chapter-number">2</span>
                        <span class="chapter-title">What is the UK?</span>
                    </a>
                    <a href="#" class="chapter-link">
                        <span class="chapter-number">3</span>
                        <span class="chapter-title">History</span>
                    </a>
                    <a href="#" class="chapter-link">
                        <span class="chapter-number">4</span>
                        <span class="chapter-title">Modern Society</span>
                    </a>
                    <a href="#" class="chapter-link">
                        <span class="chapter-number">5</span>
                        <span class="chapter-title">Government & Law</span>
                    </a>
                </div>
            </div>
            
            <!-- Download Card -->
            <div class="download-card">
                <h4>Download Resources</h4>
                <div class="download-links">
                    <a href="#" class="download-link">
                        üìÑ Chapter 1 Summary (PDF)
                    </a>
                    <a href="#" class="download-link">
                        üéß Audio Version
                    </a>
                    <a href="#" class="download-link">
                        üìã Key Points Checklist
                    </a>
                    <a href="#" class="download-link">
                        ‚ùì Practice Questions
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Custom Donation Amount -->
<div class="modal fade" id="donateModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Make a Donation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="customAmount">Enter Amount (¬£)</label>
                    <input type="number" class="form-control" id="customAmount" min="1" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label for="donorName">Your Name (Optional)</label>
                    <input type="text" class="form-control" id="donorName" placeholder="John Doe">
                </div>
                <div class="form-group">
                    <label for="donorMessage">Message (Optional)</label>
                    <textarea class="form-control" id="donorMessage" rows="3" placeholder="Thank you for this amazing resource!"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="processDonation">Proceed to Payment</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Donation functionality
    document.querySelectorAll('.donate-option:not(.custom-amount)').forEach(button => {
        button.addEventListener('click', function() {
            const amount = this.textContent.replace('¬£', '');
            alert(`Thank you for choosing to donate ¬£${amount}! This will help us maintain and improve this free resource.`);
        });
    });
    
    document.querySelector('.custom-amount').addEventListener('click', function() {
        const modal = new bootstrap.Modal(document.getElementById('donateModal'));
        modal.show();
    });
    
    document.getElementById('processDonation').addEventListener('click', function() {
        const amount = document.getElementById('customAmount').value;
        if (!amount || parseFloat(amount) <= 0) {
            alert('Please enter a valid amount.');
            return;
        }
        alert(`Thank you for your generous donation of ¬£${amount}! We truly appreciate your support.`);
        bootstrap.Modal.getInstance(document.getElementById('donateModal')).hide();
    });
    
    // Mark chapter as complete
    const markCompleteBtn = document.getElementById('markCompleteBtn');
    const completionStatus = document.getElementById('completionStatus');
    
    markCompleteBtn.addEventListener('click', function() {
        const checkboxes = document.querySelectorAll('.checkpoint input[type="checkbox"]');
        const allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);
        
        if (allChecked) {
            completionStatus.textContent = 'Completed!';
            completionStatus.className = 'completion-status completed';
            markCompleteBtn.textContent = '‚úì Chapter Completed';
            markCompleteBtn.className = 'btn btn-success';
            alert('Congratulations! You have completed Chapter 1.');
        } else {
            alert('Please check all the understanding checkpoints before marking as complete.');
        }
    });
    
    // Update progress when checkboxes are checked
    document.querySelectorAll('.checkpoint input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('.checkpoint input[type="checkbox"]');
            const checkedCount = Array.from(checkboxes).filter(cb => cb.checked).length;
            const total = checkboxes.length;
            const progress = Math.round((checkedCount / total) * 100);
            
            // Update progress in header
            const progressElement = document.querySelector('.chapter-meta .progress strong');
            if (progressElement) {
                progressElement.textContent = `${progress}%`;
            }
        });
    });
    
    // Quiz button
    document.querySelector('.start-quiz-btn').addEventListener('click', function(e) {
        e.preventDefault();
        alert('Starting Chapter 1 quiz. Good luck!');
        // In production, this would start the quiz
    });
});
</script>
{% endblock %}