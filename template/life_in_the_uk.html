<!-- templates/life_in_uk_tests.html -->
{% extends 'base.html' %}

{% block title %}Life in the UK Tests{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Header Section -->
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold text-primary mb-3">Life in the UK Tests</h1>
        <p class="lead text-muted">Practice for your British Citizenship test with our official-style practice exams.</p>
    </div>

    <!-- Test Grid - 3 columns per row -->
    <div class="row g-4 mb-5">
        {% for test in tests %}
        <div class="col-lg-3 col-md-6">
            <div class="card test-card h-100 shadow-sm border-0">
                <div class="card-header bg-primary text-white text-center py-3">
                    <h4 class="mb-0 fw-bold">{{ test.title }}</h4>
                </div>
                <div class="card-body d-flex flex-column">
                    <div class="flex-grow-1">
                        {% if test.description %}
                        <p class="card-text mb-3">{{ test.description }}</p>
                        {% endif %}
                        
                        <div class="test-info bg-light p-3 rounded mb-3">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="text-muted">
                                    <i class="fas fa-question-circle me-1"></i>
                                    <strong>{{ test.question_count }}</strong> Questions
                                </span>
                                <span class="text-muted">
                                    <i class="fas fa-clock me-1"></i>
                                    <strong>{{ test.time_limit_minutes }}</strong> minutes
                                </span>
                            </div>
                            <div class="text-center">
                                <span class="badge bg-success">
                                    <i class="fas fa-graduation-cap me-1"></i>
                                    Citizenship Test
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <a href="{% url 'take_test' test.id %}" class="btn btn-success w-100 btn-lg py-2">
                            <i class="fas fa-play-circle me-2"></i>Take the test
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="col-12">
            <div class="alert alert-info text-center py-4">
                <i class="fas fa-info-circle fa-3x mb-3 text-primary"></i>
                <h4>No Life in the UK tests available yet.</h4>
                <p class="mb-0">We're preparing the test series. Please check back soon.</p>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Support Section - Exactly like your image -->
    <div class="card border-warning shadow-lg mb-5">
        <div class="card-header bg-warning text-dark text-center py-4">
            <h2 class="mb-0 fw-bold">
                <i class="fas fa-hands-helping me-2"></i>Support this project
            </h2>
        </div>
        <div class="card-body text-center p-5">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <p class="fs-5 mb-4">
                        Lifelntheuktestweb has been created as a free source to help migrants 
                        prepare for the British Citizenship test. If you like this project 
                        and would like to help us maintain it please donate.
                    </p>
                    
                    <p class="fs-4 mb-4 fw-bold text-success">
                        <i class="fas fa-check-circle me-2"></i>Thanks and good luck! ✅
                    </p>
                    
                    <div class="mt-4">
                        <!-- Donation Button -->
                        <button class="btn btn-danger btn-lg px-5 py-3 fw-bold fs-4" 
                                style="min-width: 200px;"
                                onclick="showDonationOptions()">
                            <i class="fas fa-donate me-2"></i>Donate
                        </button>
                        
                        <!-- Donation Options (Hidden by default) -->
                        <div id="donationOptions" class="mt-4" style="display: none;">
                            <div class="row justify-content-center g-3">
                                <div class="col-md-3">
                                    <button class="btn btn-outline-primary w-100 py-2" 
                                            onclick="processDonation(5)">
                                        £5
                                    </button>
                                </div>
                                <div class="col-md-3">
                                    <button class="btn btn-outline-primary w-100 py-2" 
                                            onclick="processDonation(10)">
                                        £10
                                    </button>
                                </div>
                                <div class="col-md-3">
                                    <button class="btn btn-outline-primary w-100 py-2" 
                                            onclick="processDonation(20)">
                                        £20
                                    </button>
                                </div>
                                <div class="col-md-3">
                                    <div class="input-group">
                                        <span class="input-group-text">£</span>
                                        <input type="number" 
                                               id="customAmount" 
                                               class="form-control" 
                                               placeholder="Other"
                                               min="1">
                                        <button class="btn btn-primary" 
                                                onclick="processCustomDonation()">
                                            Go
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Payment Methods -->
                            <div class="mt-4">
                                <p class="text-muted mb-2">Secure payment via:</p>
                                <div class="d-flex justify-content-center gap-3">
                                    <span class="badge bg-light text-dark p-2">
                                        <i class="fab fa-cc-paypal fa-2x"></i>
                                    </span>
                                    <span class="badge bg-light text-dark p-2">
                                        <i class="fab fa-cc-stripe fa-2x"></i>
                                    </span>
                                    <span class="badge bg-light text-dark p-2">
                                        <i class="fab fa-google-pay fa-2x"></i>
                                    </span>
                                    <span class="badge bg-light text-dark p-2">
                                        <i class="fab fa-cc-apple-pay fa-2x"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Trust badges -->
                    <div class="mt-4 pt-3 border-top">
                        <div class="row justify-content-center g-3">
                            <div class="col-auto">
                                <span class="badge bg-light text-dark p-2">
                                    <i class="fas fa-lock me-1"></i>SSL Secure
                                </span>
                            </div>
                            <div class="col-auto">
                                <span class="badge bg-light text-dark p-2">
                                    <i class="fas fa-shield-alt me-1"></i>PCI Compliant
                                </span>
                            </div>
                            <div class="col-auto">
                                <span class="badge bg-light text-dark p-2">
                                    <i class="fas fa-user-shield me-1"></i>Privacy Protected
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Additional Info Section -->
    <div class="row mt-5">
        <div class="col-lg-8 mx-auto">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-lightbulb me-2"></i>Test Tips & Information
                    </h4>
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <i class="fas fa-check text-success me-2"></i>
                            <strong>24 questions</strong> per test, just like the official exam
                        </li>
                        <li class="list-group-item">
                            <i class="fas fa-check text-success me-2"></i>
                            <strong>45 minutes</strong> time limit for each test
                        </li>
                        <li class="list-group-item">
                            <i class="fas fa-check text-success me-2"></i>
                            <strong>75% pass mark</strong> required (18/24 correct answers)
                        </li>
                        <li class="list-group-item">
                            <i class="fas fa-check text-success me-2"></i>
                            Questions based on the official <em>Life in the UK</em> handbook
                        </li>
                        <li class="list-group-item">
                            <i class="fas fa-check text-success me-2"></i>
                            Detailed explanations for every answer
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
    /* Custom styles for this page */
    .test-card {
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid #dee2e6;
    }
    
    .test-card .card-header {
        border-bottom: 3px solid #0b5ed7;
    }
    
    .test-card:hover {
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        border-color: #0d6efd;
    }
    
    .btn-success {
        background: linear-gradient(135deg, #198754 0%, #157347 100%);
        border: none;
        border-radius: 8px;
        font-weight: 600;
        letter-spacing: 0.5px;
    }
    
    .btn-success:hover {
        background: linear-gradient(135deg, #157347 0%, #0d5c33 100%);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(25, 135, 84, 0.3);
    }
    
    .btn-danger {
        background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%);
        border: none;
        border-radius: 8px;
        font-weight: 600;
        letter-spacing: 0.5px;
    }
    
    .btn-danger:hover {
        background: linear-gradient(135deg, #b02a37 0%, #8a2530 100%);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
    }
    
    .badge.bg-light {
        border: 1px solid #dee2e6;
    }
    
    /* Animation for donation options */
    #donationOptions {
        animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-10px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    // Donation functionality
    function showDonationOptions() {
        const options = document.getElementById('donationOptions');
        if (options.style.display === 'none' || options.style.display === '') {
            options.style.display = 'block';
        } else {
            options.style.display = 'none';
        }
    }
    
    function processDonation(amount) {
        // In a real application, this would redirect to payment gateway
        alert(`Thank you for your donation of £${amount}! You will be redirected to the payment page.`);
        // window.location.href = `/donate/?amount=${amount}`;
    }
    
    function processCustomDonation() {
        const amountInput = document.getElementById('customAmount');
        const amount = amountInput.value;
        
        if (amount && amount > 0) {
            processDonation(amount);
        } else {
            alert('Please enter a valid amount.');
            amountInput.focus();
        }
    }
    
    // Make donation amount input accept only numbers
    document.getElementById('customAmount')?.addEventListener('input', function(e) {
        this.value = this.value.replace(/[^0-9]/g, '');
    });
</script>
{% endblock %}